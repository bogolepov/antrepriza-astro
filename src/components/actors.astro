---
const { lang } = Astro.props;

import dictionary from '@data/dictionary.json'
import theater from '@data/theater.json'

import '@styles/people.css'

import type { ImageMetadata } from 'astro'
import { Picture } from 'astro:assets'
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/people/*.{jpeg,jpg,png,gif}');

let actors = theater.actors.filter(actor_id => {
  let person = theater.people.find(actor => actor.id == actor_id);
  return person.suffix;
});


---

<section class="actors">
  <h1 class="section-title">{dictionary.menu_actors[lang]}</h1>
  <div class="people-table">
    {
      actors.map(actor_id => {
        let person = theater.people.find(actor => actor.id == actor_id);
        return (
          <a class="person-card hover-block" href={"/"+lang+"/theater/people/"+person.suffix}>
            <div class="person-photo">
              <Picture 
                class:list={'image-wrapper-landscape black-white-filter'} 
                src={images["/src/assets/people/" + person.photo]()} 
                formats={['avif', 'webp']} 
                widths={[210,270,360]}
                sizes={'(max-width: 320px) 210px, (max-width: 400px) 270px, 360px'}
                alt={person.name[lang] + ' ' + person.surname[lang]} />
            </div>
            <div class="person-title opacity1 bold1">{(person.gender == 'f') && dictionary.actress[lang]}{(person.gender == 'm') && dictionary.actor[lang]}</div>
            <div class="person-name">{person.name[lang]} {person.surname[lang]}</div>
          </a>
        )
      })
    }
  </div>
</section>
